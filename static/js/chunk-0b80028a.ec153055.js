(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b80028a","chunk-2d0df2b7"],{"6c35":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"system-user-container layout-padding"},[a("el-card",{staticClass:"layout-padding-auto",attrs:{shadow:"hover"}},[a("div",{staticClass:"system-user-search mb15"},[a("el-input",{staticStyle:{"max-width":"180px"},attrs:{size:"default",placeholder:"Enter name"},model:{value:t.state.tableData.param.keyword,callback:function(e){t.$set(t.state.tableData.param,"keyword",e)},expression:"state.tableData.param.keyword"}}),a("el-button",{staticClass:"ml10",attrs:{size:"default",type:"primary"},on:{click:function(e){return t.fetchData()}}},[a("el-icon",[a("ele-Search")],1),t._v(" Search ")],1),a("el-button",{staticClass:"ml10",attrs:{size:"default",type:"success"},on:{click:function(e){return t.onOpenAddOrEdit("add")}}},[a("el-icon",[a("ele-FolderAdd")],1),t._v(" Add ")],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.state.tableData.loading,expression:"state.tableData.loading"}],staticStyle:{width:"100%"},attrs:{data:t.state.tableData.data}},[a("el-table-column",{attrs:{type:"index",label:"No.",width:"60"}}),a("el-table-column",{attrs:{prop:"roleId",label:"Role ID","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"roleName",label:"Role Name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"remark",label:"Remark","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createUserName",label:"Creator","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"Create Time","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"Actions",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:"admin"===e.row.username,size:"small",text:"",type:"primary"},on:{click:function(a){return t.onOpenAddOrEdit("edit",e.row)}}},[t._v("Edit ")]),a("el-button",{attrs:{disabled:"admin"===e.row.username,size:"small",text:"",type:"primary"},on:{click:function(a){return t.onRowDel(e.row)}}},[t._v("Delete ")])]}}])})],1),a("el-pagination",{staticClass:"mt15",attrs:{"pager-count":5,"page-sizes":[10,20,30],"current-page":t.state.tableData.param.current,background:"","page-size":t.state.tableData.param.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.state.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:t.state.dialog.title,visible:t.state.dialog.isShowDialog,width:"769px"},on:{"update:visible":function(e){return t.$set(t.state.dialog,"isShowDialog",e)}}},[a("div",[a("el-form",{ref:"userDialogFormRef",attrs:{model:t.state.ruleForm,size:"default","label-width":"90px"}},[a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"Role Name"}},[a("el-input",{attrs:{placeholder:"Enter role name",clearable:""},model:{value:t.state.ruleForm.roleName,callback:function(e){t.$set(t.state.ruleForm,"roleName",e)},expression:"state.ruleForm.roleName"}})],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"Remark"}},[a("el-input",{attrs:{placeholder:"Enter remark",clearable:""},model:{value:t.state.ruleForm.remark,callback:function(e){t.$set(t.state.ruleForm,"remark",e)},expression:"state.ruleForm.remark"}})],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"Select Menu"}},[a("el-tree",{attrs:{data:t.state.menuList,"show-checkbox":"","node-key":"menuId","default-checked-keys":t.state.ruleForm.menuIdList,"check-strictly":!0,props:{children:"children",label:"title"}},on:{check:t.selectedTree}})],1)],1)],1)],1),[a("span",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"default"},on:{click:t.onCancel}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary",loading:t.state.submitBtn.loading,size:"default"},on:{click:t.onSubmit}},[t._v(t._s(t.state.dialog.submitTxt))])],1)]],2)])],1)},s=[],i=a("8988"),o=a("2342"),r=a("8f24"),n={name:"role",data(){return{state:{tableData:{data:[],total:0,loading:!1,param:{current:1,limit:10,keyword:""}},dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""},ruleForm:{roleId:"",roleName:"",remark:"",menuIdList:[]},menuList:[],submitBtn:{loading:!1,type:""}}}},methods:{initMenu(){Object(o["useMenuApi"])().list({}).then(t=>{this.state.menuList=t.data})},fetchData(){this.state.ruleForm={},this.state.tableData.loading=!0,Object(i["roleListApi"])().list(this.state.tableData.param).then(t=>{this.state.tableData.data=t.data.records,this.state.tableData.total=t.data.total,this.state.tableData.loading=!1})},onOpenAddOrEdit(t,e){"edit"===t?(console.log(e),this.state.submitBtn.type="edit",this.state.ruleForm.menuIdList=[],this.state.ruleForm=e,this.state.dialog.title="Edit Role",this.state.dialog.submitTxt="Update"):(this.state.submitBtn.type="add",this.state.ruleForm={roleId:"",roleName:"",remark:"",menuIdList:[]},this.state.dialog.title="Add Role",this.state.dialog.submitTxt="Add"),this.state.dialog.isShowDialog=!0},onRowDel(t){r["MessageBox"].confirm(`This action will permanently delete the role "${t.roleName}". Do you want to continue?`,"Attention",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.deleteInfo(t)}).catch(()=>{})},handleSizeChange(t){this.state.tableData.data=[],this.state.tableData.param.limit=t,this.fetchData()},handleCurrentChange(t){this.state.tableData.data=[],this.state.tableData.param.current=t,this.fetchData()},closeDialog(){this.state.dialog.isShowDialog=!1},onCancel(){this.closeDialog()},onSubmit(){this.state.submitBtn.loading=!0,"edit"===this.state.submitBtn.type?Object(i["roleListApi"])().update(this.state.ruleForm).then(t=>{this.state.submitBtn.loading=!1,this.closeDialog(),this.fetchData()}).catch(()=>{this.state.submitBtn.loading=!1}):Object(i["roleListApi"])().add(this.state.ruleForm).then(t=>{this.state.submitBtn.loading=!1,this.closeDialog(),this.fetchData()}).catch(()=>{this.state.submitBtn.loading=!1})},deleteInfo(t){Object(i["roleListApi"])().delete(t).then(t=>{r["Message"].success("Deleted successfully"),this.fetchData()}).catch(()=>{this.fetchData()})},selectedTree(t,e){this.state.ruleForm.menuIdList=e.checkedKeys}},computed:{},created(){},mounted(){this.fetchData(),this.initMenu()}},d=n,c=a("1805"),u=Object(c["a"])(d,l,s,!1,null,"915656f0",null);e["default"]=u.exports},8988:function(t,e,a){"use strict";a.r(e),a.d(e,"roleListApi",(function(){return s}));var l=a("b775");function s(){return{list:t=>Object(l["default"])({url:"/sys/role/list",method:"get",params:t}),add:t=>Object(l["default"])({url:"/sys/role/save",method:"post",data:t}),update:t=>Object(l["default"])({url:"/sys/role/update",method:"post",data:t}),delete:t=>Object(l["default"])({url:"/sys/role/delete",method:"post",data:t}),select:()=>Object(l["default"])({url:"/sys/role/select",method:"get"})}}}}]);