import{_ as $,r as h,c as k,o as C,q as F,E as S,w as U,b as l,d as e,i as q,e as n,f as r,F as D,m as I,t as _,j as x,G as z,l as E,g as p,H as A,I as G,h as t,n as H,k as J,J as M}from"./index-BlQcYuVy.js";const T={class:"home-container"},j={class:"detail_area"},K={class:"img_area"},O={class:"cover"},Q={class:"img_group"},W={class:"list"},X=["onClick"],Y={class:"info_area"},Z={class:"name"},ee={class:"description"},se={class:"price"},te={class:"text"},ae={class:"value"},oe={class:"table_area"},ie={class:"product_grid_area"},ce={class:"commodity_card"},le={class:"cover"},ne={class:"info"},de={class:"name"},re={class:"price"},_e={key:0,class:"show_empty"},ue={__name:"DetailView",setup(me){const m=S(),a=h({}),g=k(()=>[a.value?.mainImageAccessUrl,...a.value?.imageUrlList||[]].filter(s=>s)),u=h(0);async function f(){const{data:s}=await A(m.params.id);console.log("detail:",s),a.value=s}C(async()=>{f()});const o=h({data:[],page:1,size:8,total:0,loading:!1}),y=F(async()=>{o.value.loading=!0;const s=await G(m.params.id).finally(()=>{o.value.loading=!1});console.log("getRelatedList:",s.data),s.code===0&&(o.value.data=s.data.splice(0,8))},500);C(()=>{y()});function L(s){console.log("goDetail",s),M.push({name:"detail",params:{id:s.id}})}const w=k(()=>m.params.id);return U(w,()=>{console.log("curId",w.value),u.value=0,f(),y()}),(s,i)=>{const v=r("a-image"),N=r("icon-star-fill"),V=r("t-card"),B=r("icon-exclamation-circle-fill"),P=r("a-empty"),R=z("loading");return t(),l("div",T,[e("section",j,[e("section",K,[e("div",O,[n(v,{src:g.value[u.value],fit:"cover",width:"100%",height:"100%"},null,8,["src"])]),e("div",Q,[e("div",W,[(t(!0),l(D,null,I(g.value,(c,d)=>(t(),l("div",{key:d,class:H(["item",{active:u.value===d}]),onClick:b=>u.value=d},[n(v,{preview:!1,src:c,width:"100%",height:"100%",fit:"cover"},null,8,["src"])],10,X))),128))])])]),e("section",Y,[e("div",Z,_(a.value?.commodityName),1),e("div",ee,_(a.value?.commodityDesc),1),e("div",se,[e("div",te,[n(N,{class:"star"}),i[0]||(i[0]=x("Required price"))]),e("div",ae,"$ "+_(parseInt(a.value?.pointsPrice).toFixed(2)),1)])])]),q((t(),l("section",oe,[i[2]||(i[2]=e("div",{class:"grid_header"},[e("div",{class:"title"},"Related recommendations")],-1)),e("section",ie,[(t(!0),l(D,null,I(o.value.data,(c,d)=>(t(),J(V,{key:d,hoverShadow:"",bordered:!1,style:{width:"100%",cursor:"pointer"},onClick:b=>L(c)},{cover:p(()=>[e("div",ce,[e("div",le,[n(v,{src:c.imageUrlList[0],preview:!1,fit:"cover",width:"100%",height:"100%"},null,8,["src"])]),e("section",ne,[e("div",de,_(c.commodityName),1),e("div",re,"$ "+_(c.pointsPrice),1)])])]),_:2},1032,["onClick"]))),128))]),o.value.data.length===0?(t(),l("div",_e,[n(P,null,{image:p(()=>[n(B)]),default:p(()=>[i[1]||(i[1]=x(" No data "))]),_:1,__:[1]})])):E("",!0)])),[[R,o.value.loading]])])}}},he=$(ue,[["__scopeId","data-v-da6e93bf"]]);export{he as default};
